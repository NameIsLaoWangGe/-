{
  "code": "import { Admin, TimerAdmin, Tools, _SceneName } from \"../Frame/Lwg\";\r\nimport { _LwgEvent } from \"../Frame/LwgEvent\";\r\nimport { _HeroWeapon } from \"./_HeroWeapon\";\r\nimport { _Res } from \"../Frame/_PreLoad\";\r\nexport default class _Hero extends Admin._ObjectBase {\r\n    lwgOnAwake() {\r\n        this.Blood = this._Owner.getChildByName('Blood');\r\n        this.bloodNum = 5;\r\n        this.attackInterval = 10;\r\n        this.ballisticNum = 1;\r\n        this.ballisticPos = [\r\n            [[0, 0]],\r\n            [[-20, 0], [20, 0]],\r\n            [[-20, 0], [0, 0], [20, 0]],\r\n            [[-30, 0], [-10, 0], [10, 0], [30, 0]],\r\n            [[-40, 0], [-20, 0], [0, 0], [20, 0], [40, 0]],\r\n            [[-50, 0], [-30, 0], [-10, 0], [10, 0], [30, 0], [50, 0]],\r\n            [[-60, 0], [-40, 0], [-20, 0], [0, 0], [20, 0], [40, 0], [60, 0]],\r\n        ];\r\n        this.time = 0;\r\n    }\r\n    lwgOnStart() {\r\n        TimerAdmin._frameLoop(this.attackInterval, this, () => {\r\n            if (this.mouseP) {\r\n                for (let index = 1; index < this.ballisticPos[this.ballisticNum].length; index++) {\r\n                    const pos = this.ballisticPos[this.ballisticNum][index];\r\n                    if (pos) {\r\n                        this.createWeapon(Tools._Array.randomGetOne(['blue', 'yellow', 'red']), this._Owner.x + pos[0], this._Owner.y + pos[1]);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    lwgEvent() {\r\n        const Pro = this.Blood.getChildAt(0);\r\n        const _Prowidth = Pro.width;\r\n        this._evReg(_LwgEvent.Game.heroBlood, (number) => {\r\n            Pro.width = Pro.width - _Prowidth / this.bloodNum;\r\n            this.bloodNum -= number;\r\n            if (!this['bloodNumSwitch']) {\r\n                if (this.bloodNum <= 0) {\r\n                    this['bloodNumSwitch'] = true;\r\n                    this._openScene(_SceneName.Defeated, false);\r\n                }\r\n            }\r\n        });\r\n        this._evReg(_LwgEvent.Game.addBuff, (type) => {\r\n            switch (type) {\r\n                case 0:\r\n                    this.ballisticNum++;\r\n                    break;\r\n                case 1:\r\n                    break;\r\n                case 2:\r\n                    break;\r\n                case 3:\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n    createWeapon(color, x, y) {\r\n        const Weapon = Tools._Node.createPrefab(_Res._list.prefab2D.Weapon.prefab);\r\n        this._SceneImg('WeaponParent').addChild(Weapon);\r\n        Weapon.addComponent(_HeroWeapon);\r\n        Weapon.pos(x, y);\r\n        const Pic = Weapon.getChildByName('Pic');\r\n        Pic.skin = `Game/UI/Game/Hero/Hero_01_weapon_${color}.png`;\r\n        Weapon.name = color;\r\n        return Weapon;\r\n    }\r\n    ;\r\n    move(e) {\r\n        if (this.mouseP) {\r\n            let diffX = e.stageX - this.mouseP.x;\r\n            let diffY = e.stageY - this.mouseP.y;\r\n            this._Owner.x += diffX;\r\n            this._Owner.y += diffY;\r\n            this.mouseP = new Laya.Point(e.stageX, e.stageY);\r\n            if (this._Owner.x > Laya.stage.width) {\r\n                this._Owner.x = Laya.stage.width;\r\n            }\r\n            if (this._Owner.x < 0) {\r\n                this._Owner.x = 0;\r\n            }\r\n            if (this._Owner.y <= 0) {\r\n                this._Owner.y = 0;\r\n            }\r\n            if (this._Owner.y > Laya.stage.height) {\r\n                this._Owner.y = Laya.stage.height;\r\n            }\r\n        }\r\n    }\r\n    ;\r\n    lwgOnStageDown(e) {\r\n        this.mouseP = new Laya.Point(e.stageX, e.stageY);\r\n    }\r\n    lwgOnStageMove(e) {\r\n        this.move(e);\r\n    }\r\n    lwgOnStageUp() {\r\n        this.mouseP = null;\r\n    }\r\n}\r\n",
  "references": [
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Frame/Lwg.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Frame/LwgEvent.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Game/_HeroWeapon.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Frame/_PreLoad.ts"
  ]
}
