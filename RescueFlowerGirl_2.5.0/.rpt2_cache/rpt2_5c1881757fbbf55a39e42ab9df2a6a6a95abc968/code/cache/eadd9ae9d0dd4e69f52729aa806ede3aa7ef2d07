{
  "code": "import { Admin, DataAdmin, Effects2D, TimerAdmin, Tools } from \"./Lwg\";\r\nimport { _LwgEvent } from \"./LwgEvent\";\r\nimport { _Res } from \"./_PreLoad\";\r\nexport var _Boss;\r\n(function (_Boss) {\r\n    class _Enemy extends Admin._ObjectBase {\r\n        lwgOnAwake() {\r\n            this.generalProInit();\r\n        }\r\n        generalProInit() {\r\n            const shell = this._Owner['_EnemyData']['shell'];\r\n            this.Shell = this._Owner.getChildByName('Shell');\r\n            !shell && this.Shell.removeSelf();\r\n            this.Pic = this._Owner.getChildByName('Pic');\r\n            this.Pic.skin = `Game/UI/Game/Enemy/enemy_01_${this._Owner['_EnemyData']['color']}.png`;\r\n            this.blood = this._Owner['_EnemyData']['blood'];\r\n            this.bloodPresnt = this.blood;\r\n            this.bloodPic = this._Owner.getChildByName('Blood').getChildByName('Pic');\r\n            this.bloodWidth = this.bloodPic.width;\r\n            const angle = this._Owner['_EnemyData']['angle'];\r\n            this._Owner.rotation = angle;\r\n            this.speed = this._Owner['_EnemyData']['speed'];\r\n        }\r\n        lwgOnStart() {\r\n            this.attack();\r\n            this.move();\r\n        }\r\n        attack() {\r\n        }\r\n        move() {\r\n            TimerAdmin._frameLoop(1, this, () => {\r\n                let point = Tools._Point.getRoundPos(this._Owner.rotation += this.speed, this._SceneImg('MobileFrame').width / 2 + this._Owner.height / 2, new Laya.Point(this._SceneImg('Land').width / 2, this._SceneImg('Land').height / 2));\r\n                this._Owner.x = point.x;\r\n                this._Owner.y = point.y;\r\n            });\r\n        }\r\n        lwgEvent() {\r\n            this._evReg(_LwgEvent.Game.enemyBlood, (Enemy, num) => {\r\n                if (Enemy === this._Owner) {\r\n                    this.bloodPresnt -= num;\r\n                    this.bloodPic.width = this.bloodWidth * this.bloodPresnt / this.blood;\r\n                    if (this.bloodPresnt <= 0) {\r\n                        for (let index = 0; index < 20; index++) {\r\n                            Effects2D._Particle._spray(Laya.stage, this._gPoint, [10, 30]);\r\n                        }\r\n                        if (this._Owner.parent.numChildren == 1) {\r\n                            this._openScene('Victory', false);\r\n                        }\r\n                        this._Owner.removeSelf();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _Boss._Enemy = _Enemy;\r\n    class _EnemyBullet extends Admin._ObjectBase {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.speed = 2;\r\n        }\r\n        lwgOnStart() {\r\n            this.move();\r\n            this.checkHero();\r\n        }\r\n        move() {\r\n            let GPoint = this._SceneImg('HeroContent').localToGlobal(new Laya.Point(this._SceneImg('Hero').x, this._SceneImg('Hero').y));\r\n            let p = new Laya.Point(this._gPoint.x - GPoint.x, this._gPoint.y - GPoint.y);\r\n            p.normalize();\r\n            TimerAdmin._frameLoop(1, this, () => {\r\n                this._Owner.x -= p.x * this.speed;\r\n                this._Owner.y -= p.y * this.speed;\r\n                Tools._Node.leaveStage(this._Owner, () => {\r\n                    this._Owner.removeSelf();\r\n                    return;\r\n                });\r\n            });\r\n        }\r\n        checkHero() {\r\n            TimerAdmin._frameLoop(1, this, () => {\r\n                Tools._Node.checkTwoDistance(this._Owner, this._SceneImg('Hero'), 50, () => {\r\n                    this._Owner.removeSelf();\r\n                    this._evNotify(_LwgEvent.Game.heroBlood, [1]);\r\n                });\r\n            });\r\n        }\r\n    }\r\n    _Boss._EnemyBullet = _EnemyBullet;\r\n    class _BossData extends DataAdmin._Table {\r\n        constructor() {\r\n            super();\r\n            this._otherPro = {\r\n                blood: 'blood',\r\n                specials: 'specials',\r\n                speed: 'speed',\r\n                skills: 'skills',\r\n                bulletPower: 'bulletPower',\r\n            };\r\n            this._arr = _Res._list.json.Boss.dataArr;\r\n        }\r\n        static _ins() {\r\n            if (!this.ins) {\r\n                this.ins = new _BossData();\r\n                this.ins._arr = _Res._list.json.Boss.dataArr;\r\n                this.ins.levelData = this.ins._getObjByName(`Boss${Admin._game.level}`);\r\n            }\r\n            return this.ins;\r\n        }\r\n        getLevelSkill() {\r\n            return this.levelData['skills'];\r\n        }\r\n        getLevelSpeed() {\r\n            return this.levelData['speed'];\r\n        }\r\n        getLevelblood() {\r\n            return this.levelData['blood'];\r\n        }\r\n        getOtherBossSkill() {\r\n            return;\r\n        }\r\n        createLevelBoss(Parent) {\r\n            const element = Tools._Node.createPrefab(_Res._list.prefab2D.Enemy.prefab, Parent);\r\n            const color = Tools._Array.randomGetOne(['blue', 'yellow', 'red']);\r\n            element.name = `${color}'Boss`;\r\n            let speed = Tools._Number.randomOneBySection(_BossData._ins().getLevelSpeed()[0], _BossData._ins().getLevelSpeed()[1]);\r\n            speed = Tools._Number.randomOneHalf() == 0 ? -speed : speed;\r\n            console.log(speed);\r\n            element['_EnemyData'] = {\r\n                blood: _BossData._ins().getLevelblood(),\r\n                angle: Tools._Number.randomOneBySection(0, 360),\r\n                speed: speed,\r\n                color: color,\r\n                sikllNameArr: _BossData._ins().getLevelSkill(),\r\n            };\r\n            element.addComponent(Boss);\r\n            return element;\r\n        }\r\n    }\r\n    _Boss._BossData = _BossData;\r\n    class Boss extends _Enemy {\r\n        lwgOnAwake() {\r\n            this.generalProInit();\r\n        }\r\n        attack() {\r\n            const num = 20;\r\n        }\r\n    }\r\n    _Boss.Boss = Boss;\r\n    class BossBullet extends _EnemyBullet {\r\n        lwgOnStart() {\r\n            this.move();\r\n            this.checkHero();\r\n        }\r\n        move() {\r\n            TimerAdmin._frameLoop(1, this, () => {\r\n                let point = Tools._Point.getRoundPos(this._Owner.rotation, this.speed += 2, this._fPoint);\r\n                this._Owner.x = point.x;\r\n                this._Owner.y = point.y;\r\n            });\r\n        }\r\n    }\r\n    _Boss.BossBullet = BossBullet;\r\n    class Skill {\r\n        static _ins() {\r\n            if (!this.ins) {\r\n                this.ins = new Skill();\r\n            }\r\n            return this.ins;\r\n        }\r\n        round() {\r\n            for (let index = 0; index < 20; index++) {\r\n                const bullet = Tools._Node.createPrefab(_Res._list.prefab2D.EnemyBullet.prefab);\r\n                bullet;\r\n            }\r\n        }\r\n    }\r\n    _Boss.Skill = Skill;\r\n    class _EnemyData extends DataAdmin._Table {\r\n        constructor(_EnemyParent) {\r\n            super();\r\n            this._otherPro = {\r\n                quantity: \"quantity\",\r\n                shellNum: \"shellNum\",\r\n                blood: 'blood',\r\n                boss: 'boss',\r\n                speed: 'speed',\r\n            };\r\n            this.EnemyParent = _EnemyParent;\r\n            this._arr = _Res._list.json.Enemy.dataArr;\r\n        }\r\n        createEnmey() {\r\n            const obj = this._getObjByName(`level${Admin._game.level}`);\r\n            const quantity = obj[this._otherPro.quantity];\r\n            const shellNum = obj[this._otherPro.shellNum];\r\n            let shellNumTime = 0;\r\n            for (let index = 0; index < quantity; index++) {\r\n                const element = Tools._Node.createPrefab(_Res._list.prefab2D.Enemy.prefab, this.EnemyParent);\r\n                shellNumTime++;\r\n                const color = Tools._Array.randomGetOne(['blue', 'yellow', 'red']);\r\n                element.name = `${color}${index}`;\r\n                let speed = Tools._Number.randomOneBySection(obj[this._otherPro.speed][0], obj[this._otherPro.speed][1]);\r\n                speed = Tools._Number.randomOneHalf() == 0 ? -speed : speed;\r\n                element['_EnemyData'] = {\r\n                    shell: shellNumTime <= shellNum ? true : false,\r\n                    blood: obj['blood'],\r\n                    angle: Tools._Number.randomOneBySection(0, 360),\r\n                    speed: speed,\r\n                    color: color,\r\n                };\r\n                element.addComponent(_Enemy);\r\n            }\r\n        }\r\n    }\r\n    _Boss._EnemyData = _EnemyData;\r\n})(_Boss || (_Boss = {}));\r\n",
  "references": [
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Frame/Lwg.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Frame/LwgEvent.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Frame/_PreLoad.ts"
  ]
}
