{
  "code": "import { TimerAdmin, Tools } from \"../Frame/Lwg\";\r\nimport { _GameEvent } from \"./_GameEvent\";\r\nimport _EnemyBullet from \"./EnemyBullet\";\r\nimport { _Res } from \"../Frame/_PreLoad\";\r\nimport BloodBase from \"./BloodBase\";\r\nimport { Heroine } from \"./Heroine\";\r\nexport default class Enemy extends BloodBase {\r\n    lwgOnAwake() {\r\n        this.generalProInit();\r\n        this.bloodInit(this._Owner['_EnemyData']['blood']);\r\n        this.ranAttackNum = Tools._Number.randomOneBySection(1, 3, true);\r\n    }\r\n    generalProInit() {\r\n        this._Owner.pos(this._SceneImg('Land').width / 2, this._SceneImg('Land').height / 2);\r\n        this.Shell = this._Owner.getChildByName('Shell');\r\n        this.Shell.removeSelf();\r\n        this.Pic = this._Owner.getChildByName('Pic');\r\n        if (this._Owner['_EnemyData']['color']) {\r\n            this.Pic.skin = `Game/UI/Game/Enemy/enemy_01_${this._Owner['_EnemyData']['color']}.png`;\r\n        }\r\n        const angle = this._Owner['_EnemyData']['angle'];\r\n        this._Owner.rotation = angle;\r\n        this.speed = this._Owner['_EnemyData']['speed'];\r\n        this.groundRadius = 200;\r\n    }\r\n    lwgOnStart() {\r\n        this.attack();\r\n        this.appear(() => {\r\n            this.move();\r\n        });\r\n    }\r\n    appear(func) {\r\n        let radius = 0;\r\n        const radiusSpeed = 2;\r\n        const time = 220 / radiusSpeed;\r\n        TimerAdmin._frameNumLoop(1, time, this, () => {\r\n            radius += radiusSpeed;\r\n            let point = Tools._Point.getRoundPos(this._Owner.rotation, radius, new Laya.Point(this._SceneImg('Land').width / 2, this._SceneImg('Land').height / 2));\r\n            this._Owner.x = point.x;\r\n            this._Owner.y = point.y;\r\n        }, () => {\r\n            func();\r\n        });\r\n    }\r\n    attack() {\r\n        this[`attackType${this.ranAttackNum}`]();\r\n    }\r\n    move() {\r\n        TimerAdmin._frameLoop(1, this, () => {\r\n            let point = Tools._Point.getRoundPos(this._Owner.rotation += this.speed, 220, new Laya.Point(this._SceneImg('Land').width / 2, this._SceneImg('Land').height / 2));\r\n            this._Owner.x = point.x;\r\n            this._Owner.y = point.y;\r\n        });\r\n    }\r\n    deathFunc() {\r\n        this._evNotify('presentQuantity');\r\n        if (this._Owner.name === 'Boss') {\r\n            Tools._Node.createPrefab(_Res._list.prefab2D.Heroine.prefab, this._Parent, [this._Owner.x, this._Owner.y], Heroine);\r\n        }\r\n    }\r\n    lwgEvent() {\r\n        this._evReg(_GameEvent.Game.enemyCheckWeapon, (Weapon, numBlood) => {\r\n            this.checkOtherRule(Weapon, 30, numBlood);\r\n        });\r\n    }\r\n    createBullet() {\r\n        const bullet = Tools._Node.createPrefab(_Res._list.prefab2D.EnemyBullet.prefab, this._SceneImg('EBparrent'), [this._gPoint.x, this._gPoint.y], _EnemyBullet);\r\n        return bullet;\r\n    }\r\n    attackType1() {\r\n        const angleSpeed = 15;\r\n        TimerAdmin._frameRandomLoop(120, 300, this, () => {\r\n            for (let index = 0; index < 3; index++) {\r\n                const bullet = this.createBullet();\r\n                let speed = 0;\r\n                const gPoint = new Laya.Point(this._gPoint.x, this._gPoint.y);\r\n                TimerAdmin._frameLoop(1, bullet, () => {\r\n                    let point = Tools._Point.getRoundPos(index * angleSpeed + 180 - angleSpeed, speed += 2, gPoint);\r\n                    bullet.pos(point.x, point.y);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    attackType2() {\r\n        TimerAdmin._frameRandomLoop(50, 100, this, () => {\r\n            const bullet = this.createBullet();\r\n            TimerAdmin._frameLoop(1, bullet, () => {\r\n                bullet.y += 3;\r\n            });\r\n        });\r\n    }\r\n}\r\n",
  "references": [
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Frame/Lwg.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Game/_GameEvent.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Game/EnemyBullet.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Frame/_PreLoad.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Game/BossBullet.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Game/BloodBase.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Game/_Game.ts",
    "F:/Work/Game/07_RescueFlowerGirl_2.5.0/Project/RescueFlowerGirl_2.5.0/src/script/Game/Heroine.ts"
  ]
}
