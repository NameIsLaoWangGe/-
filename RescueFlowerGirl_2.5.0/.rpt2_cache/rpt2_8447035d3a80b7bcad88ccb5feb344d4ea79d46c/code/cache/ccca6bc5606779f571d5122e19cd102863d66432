{
  "code": "import { LwgNode, LwgTimer, LwgTools } from \"../../Lwg/Lwg\";\r\nimport { EnemyBullet } from \"./EnemyBullet\";\r\nexport class _General {\r\n    static moveByAngle(Bullet, diffX, angle, speed, rSpeed, FrameFunc, ChildMove) {\r\n        let frameTime = 0;\r\n        let _childMoveDelay = 0;\r\n        if (ChildMove) {\r\n            _childMoveDelay = ChildMove.delay ? LwgTools.Num.randomOneInt(ChildMove.delay[0], ChildMove.delay[1]) : null;\r\n        }\r\n        const _rSpeed = LwgTools.Num.randomOneHalf() === 0 ? rSpeed : -rSpeed;\r\n        Bullet.rotation = angle - 90;\r\n        let _baseRadius = 0;\r\n        const pos = new Laya.Point(Bullet.x += diffX, Bullet.y);\r\n        LwgTimer.frameLoop(1, Bullet, () => {\r\n            frameTime++;\r\n            const point = LwgTools.Point.getRoundPosNew(angle, _baseRadius += speed, pos);\r\n            Bullet.pos(point.x, point.y);\r\n            Bullet.rotation += _rSpeed;\r\n            if (FrameFunc && FrameFunc.func && FrameFunc.interval) {\r\n                if (frameTime % FrameFunc.interval === 0) {\r\n                    FrameFunc.func();\r\n                }\r\n            }\r\n            if (ChildMove && ChildMove.type) {\r\n                if (_childMoveDelay && frameTime > _childMoveDelay) {\r\n                    this[ChildMove.type](Bullet);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    static moveByAngle_Stretch(Bullet, minDis, diffX, angleByCenter, speed, dis, rSpeed, FrameFunc, ChildMove) {\r\n        let frameTime = 0;\r\n        let dir = 'add';\r\n        let _childMoveDelay;\r\n        if (ChildMove) {\r\n            _childMoveDelay = ChildMove.delay ? LwgTools.Num.randomOneInt(ChildMove.delay[0], ChildMove.delay[1]) : null;\r\n        }\r\n        const _rSpeed = LwgTools.Num.randomOneHalf() === 0 ? rSpeed : -rSpeed;\r\n        let _baseRadius = minDis;\r\n        const pos = new Laya.Point(Bullet.x += diffX, Bullet.y);\r\n        LwgTimer.frameLoop(1, Bullet, () => {\r\n            frameTime++;\r\n            let point;\r\n            if (dir === 'add') {\r\n                point = LwgTools.Point.getRoundPosNew(angleByCenter, _baseRadius += speed, pos);\r\n            }\r\n            else {\r\n                point = LwgTools.Point.getRoundPosNew(angleByCenter, _baseRadius -= speed, pos);\r\n            }\r\n            Bullet.pos(point.x, point.y);\r\n            if (_baseRadius > dis) {\r\n                dir = 'sub';\r\n            }\r\n            else if (_baseRadius <= minDis) {\r\n                _baseRadius = minDis;\r\n                dir = 'add';\r\n            }\r\n            Bullet.rotation += _rSpeed;\r\n            if (FrameFunc && FrameFunc.func && FrameFunc.interval) {\r\n                if (frameTime % FrameFunc.interval === 0) {\r\n                    FrameFunc.func();\r\n                }\r\n            }\r\n            if (ChildMove && ChildMove.type) {\r\n                if (_childMoveDelay && frameTime > _childMoveDelay) {\r\n                    this[ChildMove.type](Bullet);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    static moveByXY(Bullet, diffX, speedX, speedY, rSpeed, FrameFunc, ChildMove) {\r\n        let time = 0;\r\n        let _childMoveDelay;\r\n        if (ChildMove) {\r\n            _childMoveDelay = ChildMove.delay ? LwgTools.Num.randomOneInt(ChildMove.delay[0], ChildMove.delay[1]) : null;\r\n        }\r\n        Bullet.x += diffX;\r\n        const _rSpeed = LwgTools.Num.randomOneHalf() === 0 ? rSpeed : -rSpeed;\r\n        LwgTimer.frameLoop(1, Bullet, () => {\r\n            time++;\r\n            Bullet.x += speedX;\r\n            Bullet.y += speedY;\r\n            Bullet.rotation += _rSpeed;\r\n            if (FrameFunc && FrameFunc.func && FrameFunc.interval) {\r\n                if (time % FrameFunc.interval === 0) {\r\n                    FrameFunc.func();\r\n                }\r\n            }\r\n            if (ChildMove && ChildMove.type) {\r\n                if (_childMoveDelay && time > _childMoveDelay) {\r\n                    this[ChildMove.type](Bullet);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    static childStretch(ParentBullet, speed = 2, rSpeed = 5) {\r\n        EnemyBullet.checkNumChild(ParentBullet);\r\n        if (ParentBullet['childStretch']) {\r\n            return;\r\n        }\r\n        else {\r\n            ParentBullet['childStretch'] = true;\r\n            const parentLocP = ParentBullet.globalToLocal(new Laya.Point(ParentBullet.x, ParentBullet.y));\r\n            for (let index = 0; index < ParentBullet.numChildren; index++) {\r\n                const ChildB = ParentBullet.getChildAt(index);\r\n                LwgNode._addProperty(ChildB);\r\n                const angle = LwgTools.Point.pointByAngleNew(parentLocP.x - ChildB.x, parentLocP.y - ChildB.y);\r\n                const baseDis = parentLocP.distance(ChildB.x, ChildB.y);\r\n                this.moveByAngle_Stretch(ChildB, baseDis, 0, angle, speed, 100, 0, null, null);\r\n            }\r\n        }\r\n    }\r\n    static childExplodebyAngle(ParentBullet, speed = 10, rSpeed = 5) {\r\n        Laya.timer.clearAll(ParentBullet);\r\n        EnemyBullet.checkNumChild(ParentBullet);\r\n        const gPosBullet = new Laya.Point(ParentBullet._lwg.gPoint.x, ParentBullet._lwg.gPoint.y);\r\n        for (let index = 0; index < ParentBullet.numChildren; index++) {\r\n            const ChildB = ParentBullet.getChildAt(index);\r\n            LwgNode._addProperty(ChildB);\r\n            const gPosChildB = new Laya.Point(ChildB._lwg.gPoint.x, ChildB._lwg.gPoint.y);\r\n            const angle = LwgTools.Point.pointByAngleNew(gPosChildB.x - gPosBullet.x, gPosChildB.y - gPosBullet.y);\r\n            this.moveByAngle(ChildB, 0, angle, speed, rSpeed, null, null);\r\n        }\r\n    }\r\n    static _fall(Enemy, interval1, interval2, speedY = 10, rSpeed = 0, style = EnemyBullet.Type.three_Across, delay = 0, diffX = 0, frameFunc, ChildMove) {\r\n        LwgTimer.frameOnce(delay, Enemy, () => {\r\n            LwgTimer.frameRandomLoop(interval1, interval2, Enemy, () => {\r\n                this.moveByXY(EnemyBullet[style](Enemy), diffX, 0, speedY, rSpeed, frameFunc, ChildMove);\r\n            });\r\n        });\r\n    }\r\n    static _annular(Enemy, interval, num = 10, speed = 10, rSpeed = 0, style, delay = 0, diffX = 0, frameFunc, ChildMove) {\r\n        LwgTimer.frameOnce(delay, Enemy, () => {\r\n            LwgTimer.frameLoop(interval, Enemy, () => {\r\n                for (let index = 0; index < num; index++) {\r\n                    this.moveByAngle(EnemyBullet[style](Enemy), diffX, 360 / num * index, speed, rSpeed, frameFunc, ChildMove);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    static _spiral(Enemy, interval, num, spacingAngle, speed = 10, rSpeed = 0, style = EnemyBullet.Type.single, delay = 0, diffX = 0, frameFunc, ChildMove) {\r\n        let time = 0;\r\n        LwgTimer.frameOnce(delay, Enemy, () => {\r\n            LwgTimer.frameLoop(interval, Enemy, () => {\r\n                time++;\r\n                const fA = 0;\r\n                const ep = new Laya.Point(Enemy._lwg.gPoint.x + diffX, Enemy._lwg.gPoint.y);\r\n                for (let index = 0; index < num; index++) {\r\n                    let angle = fA + time * spacingAngle;\r\n                    angle += index * 360 / num;\r\n                    this.moveByAngle(EnemyBullet[style](Enemy), diffX, angle, speed, rSpeed, frameFunc, ChildMove);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    static _slapDown(Enemy, interval = 3, startAngle = 0, endAngle = 180, spacingAngle = 15, speed = 10, rSpeed = 0, style = EnemyBullet.Type.single, delay = 0, diffX = 0, frameFunc, ChildMove) {\r\n        LwgTimer.frameOnce(delay, Enemy, () => {\r\n            let time = 0;\r\n            LwgTimer.frameLoop(interval, Enemy, () => {\r\n                let angle = time * spacingAngle;\r\n                if (angle > endAngle) {\r\n                    Enemy['angleState'] = 'sub';\r\n                }\r\n                if (angle <= startAngle) {\r\n                    Enemy['angleState'] = 'add';\r\n                }\r\n                if (Enemy['angleState'] === 'sub') {\r\n                    time--;\r\n                }\r\n                else {\r\n                    time++;\r\n                }\r\n                this.moveByAngle(EnemyBullet[style](Enemy), diffX, angle, speed, rSpeed, frameFunc, ChildMove);\r\n            });\r\n        });\r\n    }\r\n    static _randomAngleDown(Enemy, interval1, interval2, speed = 10, rSpeed = 0, style = EnemyBullet.Type.single, delay = 0, diffX = 0, frameFunc, ChildMove) {\r\n        LwgTimer.frameOnce(delay, Enemy, () => {\r\n            LwgTimer.frameRandomLoop(interval1, interval2, Enemy, () => {\r\n                this.moveByAngle(EnemyBullet[style](Enemy), diffX, LwgTools.Num.randomOneInt(0, 180), speed, rSpeed, frameFunc, ChildMove);\r\n            });\r\n        });\r\n    }\r\n    static _evenDowByCenter(Enemy, interval = 5, num = 2, spacing = 30, speed = 10, rSpeed = 0, style = EnemyBullet.Type.three_Triangle, delay = 0, diffX = 0, frameFunc, ChildMove) {\r\n        LwgTimer.frameOnce(delay, Enemy, () => {\r\n            rSpeed = LwgTools.Num.randomOneHalf() === 0 ? rSpeed : -rSpeed;\r\n            LwgTimer.frameLoop(interval, Enemy, () => {\r\n                for (let index = 0; index < num; index++) {\r\n                    let angle = index * (180 - spacing * 2) / (num - 1) + spacing;\r\n                    this.moveByAngle(EnemyBullet[style](Enemy), diffX, angle, speed, rSpeed, frameFunc, ChildMove);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    static _assignAngle(Enemy, interval = 20, angle = 30, num = 2, numFrameInterval = 10, speed = 10, rSpeed = 0, style = EnemyBullet.Type.single, delay = 0, diffX = 0, frameFunc, ChildMove) {\r\n        LwgTimer.frameOnce(delay, Enemy, () => {\r\n            LwgTimer.frameLoop(interval, Enemy, () => {\r\n                for (let index = 0; index < num; index++) {\r\n                    LwgTimer.frameOnce(numFrameInterval * index, Enemy, () => {\r\n                        this.moveByAngle(EnemyBullet[style](Enemy), diffX, angle, speed, rSpeed, frameFunc, ChildMove);\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n_General.ChildMoveType = {\r\n    childExplodebyAngle: 'childExplodebyAngle',\r\n    childStretch: 'childStretch',\r\n};\r\n",
  "references": [
    "D:/Work/Game/RescueFlowerGirl/Project/RescueFlowerGirl_2.5.0/src/script/Lwg/Lwg.ts",
    "D:/Work/Game/RescueFlowerGirl/Project/RescueFlowerGirl_2.5.0/src/script/Game/EnemyAttack/EnemyBullet.ts"
  ]
}
