{
  "code": "import { LwgTimer, LwgTools } from \"../../Lwg/Lwg\";\r\nimport { _Res } from \"../_Res\";\r\nimport EnemyBullet from \"./EnemyBullet\";\r\nexport class EnemyAttack {\r\n    static createBullet(enemy) {\r\n        const gP = this.getEnemyGp(enemy);\r\n        const bullet = LwgTools._Node.createPrefab(_Res.$prefab2D.EnemyBullet.prefab2D, this.EBParent, [gP.x, gP.y], EnemyBullet);\r\n        return bullet;\r\n    }\r\n    static getEnemyGp(enemy) {\r\n        if (enemy.parent) {\r\n            const parent = enemy.parent;\r\n            return parent.localToGlobal(new Laya.Point(enemy.x, enemy.y));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    static attackType1(enemy) {\r\n        const angleSpeed = 15;\r\n        LwgTimer._frameRandomLoop(120, 300, enemy, () => {\r\n            const gPoint = this.getEnemyGp(enemy);\r\n            if (!gPoint)\r\n                return;\r\n            for (let index = 0; index < 3; index++) {\r\n                const bullet = this.createBullet(enemy);\r\n                let speed = 0;\r\n                LwgTimer._frameLoop(1, bullet, () => {\r\n                    const point = LwgTools._Point.getRoundPosNew(index * angleSpeed + 180 - angleSpeed, speed += 2, gPoint);\r\n                    bullet.pos(point.x, point.y);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    static attackType2(enemy) {\r\n        LwgTimer._frameRandomLoop(50, 100, enemy, () => {\r\n            const bullet = this.createBullet(enemy);\r\n            LwgTimer._frameLoop(1, bullet, () => {\r\n                bullet.y += 3;\r\n            });\r\n        });\r\n    }\r\n    static attackType3(enemy) {\r\n        LwgTimer._frameLoop(80, enemy, () => {\r\n            const bullet = this.createBullet(enemy);\r\n            const gPoint = this.getEnemyGp(enemy);\r\n            if (!gPoint)\r\n                return;\r\n            const angle = LwgTools._Number.randomOneBySection(45, 135) + 90;\r\n            let speed = 5;\r\n            LwgTimer._frameLoop(1, bullet, () => {\r\n                const point = LwgTools._Point.getRoundPosNew(angle, speed += 5, gPoint);\r\n                bullet.pos(point.x, point.y);\r\n            });\r\n        });\r\n    }\r\n    static attackType4(enemy) {\r\n        let time = 0;\r\n        const num = 20;\r\n        LwgTimer._frameRandomLoop(50, 100, this, () => {\r\n            time++;\r\n            const gPoint = this.getEnemyGp(enemy);\r\n            if (!gPoint)\r\n                return;\r\n            for (let index = 0; index < num; index++) {\r\n                const bullet = this.createBullet(enemy);\r\n                bullet.rotation = 360 / num * index + time * 10;\r\n                let speed = 0;\r\n                LwgTimer._frameLoop(1, bullet, () => {\r\n                    const point = LwgTools._Point.getRoundPosNew(bullet.rotation, speed += 5, gPoint);\r\n                    bullet.pos(point.x, point.y);\r\n                });\r\n            }\r\n        }, true);\r\n    }\r\n    static attackType5(enemy) {\r\n        let time = 0;\r\n        LwgTimer._frameLoop(2, enemy, () => {\r\n            time++;\r\n            const gPoint = this.getEnemyGp(enemy);\r\n            if (!gPoint)\r\n                return;\r\n            const bullet = this.createBullet(enemy);\r\n            bullet.rotation = time * 10;\r\n            let speed = 0;\r\n            LwgTimer._frameLoop(1, bullet, () => {\r\n                const point = LwgTools._Point.getRoundPosNew(bullet.rotation, speed += 5, gPoint);\r\n                bullet.pos(point.x, point.y);\r\n            });\r\n        }, true);\r\n    }\r\n    static attackType6(enemy) {\r\n        let time = 0;\r\n        const num = 3;\r\n        LwgTimer._frameLoop(5, enemy, () => {\r\n            time++;\r\n            for (let index = 0; index < num; index++) {\r\n                const gPoint = this.getEnemyGp(enemy);\r\n                if (!gPoint)\r\n                    return;\r\n                const bullet = this.createBullet(enemy);\r\n                bullet.rotation = index * 360 / num + time * 15;\r\n                let speed = 0;\r\n                LwgTimer._frameLoop(1, bullet, () => {\r\n                    const point = LwgTools._Point.getRoundPosNew(bullet.rotation, speed += 5, gPoint);\r\n                    bullet.pos(point.x, point.y);\r\n                });\r\n            }\r\n        }, true);\r\n    }\r\n    static attackType7(enemy) {\r\n        let time = 0;\r\n        const spacing = 60;\r\n        LwgTimer._frameLoop(30, enemy, () => {\r\n            time++;\r\n            let num = 5;\r\n            if (time % 2 == 0) {\r\n                num = 6;\r\n            }\r\n            for (let index = 0; index < num; index++) {\r\n                const gPoint = this.getEnemyGp(enemy);\r\n                if (!gPoint)\r\n                    return;\r\n                const bullet = this.createBullet(enemy);\r\n                bullet.pos(Laya.stage.width / num * index + (Laya.stage.width / num / 2), gPoint.y);\r\n                LwgTimer._frameLoop(1, bullet, () => {\r\n                    bullet.y += 5;\r\n                });\r\n            }\r\n        }, true);\r\n    }\r\n    static attackType8(enemy) {\r\n        const spacing = 70;\r\n        LwgTimer._frameLoop(30, enemy, () => {\r\n            let diff = 0;\r\n            for (let index = 0; index < 5; index++) {\r\n                const gPoint = this.getEnemyGp(enemy);\r\n                if (!gPoint)\r\n                    return;\r\n                const bullet = this.createBullet(enemy);\r\n                switch (index) {\r\n                    case 0:\r\n                        diff = -spacing * 2;\r\n                        break;\r\n                    case 1:\r\n                        diff = -spacing;\r\n                        break;\r\n                    case 2:\r\n                        diff = 0;\r\n                        break;\r\n                    case 3:\r\n                        diff = spacing;\r\n                        break;\r\n                    case 4:\r\n                        diff = spacing * 2;\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                bullet.pos(gPoint.x + diff, gPoint.y);\r\n                LwgTimer._frameLoop(1, bullet, () => {\r\n                    bullet.y += 6;\r\n                });\r\n            }\r\n        }, true);\r\n    }\r\n}\r\n",
  "references": [
    "D:/Work/RescueFlowerGirl/RescueFlowerGirl_2.5.0/src/script/Lwg/Lwg.ts",
    "D:/Work/RescueFlowerGirl/RescueFlowerGirl_2.5.0/src/script/Game/_Res.ts",
    "D:/Work/RescueFlowerGirl/RescueFlowerGirl_2.5.0/src/script/Game/Role/EnemyBullet.ts"
  ]
}
