{
  "code": "import { Admin, Click, EventAdmin, TimerAdmin, Tools } from \"./Lwg\";\r\nimport { _PreloadUrl } from \"./_PreLoad\";\r\nexport var _Game;\r\n(function (_Game) {\r\n    class _Data {\r\n    }\r\n    _Data._property = {\r\n        color: 'color',\r\n        index: 'index',\r\n    };\r\n    _Data._arr = [\r\n        {\r\n            index: 1,\r\n            color: 'blue',\r\n        },\r\n        {\r\n            index: 2,\r\n            color: 'red',\r\n        },\r\n        {\r\n            index: 3,\r\n            color: 'yellow',\r\n        }, {\r\n            index: 4,\r\n            color: 'red',\r\n        }, {\r\n            index: 5,\r\n            color: 'yellow',\r\n        }, {\r\n            index: 6,\r\n            color: 'red',\r\n        }, {\r\n            index: 7,\r\n            color: 'blue',\r\n        }, {\r\n            index: 8,\r\n            color: 'yellow',\r\n        },\r\n    ];\r\n    _Game._Data = _Data;\r\n    let _Label;\r\n    (function (_Label) {\r\n        _Label[\"trigger\"] = \"trigger\";\r\n        _Label[\"weapon\"] = \"weapon\";\r\n    })(_Label = _Game._Label || (_Game._Label = {}));\r\n    _Game._fireControl = {\r\n        rotateSwitch: true,\r\n        moveDownY: 0,\r\n        get moveRotateSpeed() {\r\n            return this['_rotateSpeed'] ? this['_rotateSpeed'] : 0;\r\n        },\r\n        set moveRotateSpeed(speed) {\r\n            if (!_Game._fireControl.rotateSwitch) {\r\n                this['_rotateSpeed'] = speed;\r\n                EventAdmin._notify(_Event._Game_WeaponSate, [_WeaponSateType.mouseMove]);\r\n            }\r\n        },\r\n    };\r\n    let _Event;\r\n    (function (_Event) {\r\n        _Event[\"_Game_WeaponSate\"] = \"_Game_WeaponSate\";\r\n    })(_Event = _Game._Event || (_Game._Event = {}));\r\n    let _WeaponSateType;\r\n    (function (_WeaponSateType) {\r\n        _WeaponSateType[\"rotate\"] = \"rotate\";\r\n        _WeaponSateType[\"mouseMove\"] = \"mouseMove\";\r\n        _WeaponSateType[\"launch\"] = \"launch\";\r\n        _WeaponSateType[\"free\"] = \"free\";\r\n    })(_WeaponSateType = _Game._WeaponSateType || (_Game._WeaponSateType = {}));\r\n    function _init() {\r\n    }\r\n    _Game._init = _init;\r\n    class _Enemy extends Admin._Object {\r\n    }\r\n    _Game._Enemy = _Enemy;\r\n    class _Weapon extends Admin._Object {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.weapon = {\r\n                distance: 0,\r\n                baseSpeed: 60,\r\n                accelerated: 1,\r\n                get state() {\r\n                    return this['Statevalue'];\r\n                },\r\n                set state(val) {\r\n                    this['Statevalue'] = val;\r\n                },\r\n                speed: () => {\r\n                    if (!this['weaponGetTime']) {\r\n                        this['weaponGetTime'] = 0;\r\n                    }\r\n                    this['weaponGetTime']++;\r\n                    this.weapon.baseSpeed += this.weapon.accelerated;\r\n                    let speed = this.weapon.baseSpeed * this['weaponGetTime'];\r\n                    return this.weapon.distance + speed;\r\n                }\r\n            };\r\n        }\r\n        lwgOnAwake() {\r\n            this.parent = this.Owner.parent;\r\n            this.weapon.distance = this.parent.width / 2;\r\n        }\r\n        lwgOnStart() {\r\n        }\r\n        lwgEventRegister() {\r\n            var move = (rSpeed, radius) => {\r\n                let point = Tools.Point.getRoundPos(rSpeed ? this.Owner.rotation += rSpeed : this.Owner.rotation, radius, new Laya.Point(this.parent.width / 2, this.parent.height / 2));\r\n                this.Owner.x = point.x;\r\n                this.Owner.y = point.y;\r\n            };\r\n            EventAdmin._register(_Event._Game_WeaponSate, this, (type) => {\r\n                if (this.weapon.state == _WeaponSateType.launch) {\r\n                    return;\r\n                }\r\n                Laya.timer.clearAll(this);\r\n                if (type == _WeaponSateType.rotate) {\r\n                    TimerAdmin._frameLoop(1, this, () => {\r\n                        move(_Game._fireControl.moveRotateSpeed > 0 ? 0.1 : -0.1, this.parent.width / 2 - 50);\r\n                    });\r\n                }\r\n                else if (type == _WeaponSateType.mouseMove) {\r\n                    move(_Game._fireControl.moveRotateSpeed, this.parent.width / 2 - 50);\r\n                }\r\n                else if (type == _WeaponSateType.launch) {\r\n                    if (this.Owner.scaleX == 1.2) {\r\n                        this.weapon.state = _WeaponSateType.free;\r\n                        TimerAdmin._frameLoop(1, this, () => {\r\n                            this.weapon.state = _WeaponSateType.launch;\r\n                            move(null, this.weapon.speed());\r\n                        });\r\n                    }\r\n                    else {\r\n                        TimerAdmin._frameLoop(1, this, () => {\r\n                            move(_Game._fireControl.moveRotateSpeed > 0 ? 0.1 : -0.1, this.parent.width / 2 - 50);\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        onTriggerEnter(other, self, contact) {\r\n            let otherLabel = other.label;\r\n            switch (otherLabel) {\r\n                case _Label.trigger:\r\n                    this.Owner.scale(1.2, 1.2);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        onTriggerExit(other, self, contact) {\r\n            let otherLabel = other.label;\r\n            switch (otherLabel) {\r\n                case _Label.trigger:\r\n                    this.Owner.scale(1, 1);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    _Game._Weapon = _Weapon;\r\n    class Game extends Admin._SceneBase {\r\n        lwgOnEnable() {\r\n            for (let index = 0; index < _Data._arr.length; index++) {\r\n                let Weapon = Tools.Node.prefabCreate(_PreloadUrl._list.prefab2D.Weapon.prefab);\r\n                this.ImgVar('WeaponParent').addChild(Weapon);\r\n                let point = Tools.Point.getRoundPos(index / _Data._arr.length * 360, this.ImgVar('WeaponParent').width / 2 - 50, new Laya.Point(this.ImgVar('WeaponParent').width / 2, this.ImgVar('WeaponParent').height / 2));\r\n                Weapon.x = point.x;\r\n                Weapon.y = point.y;\r\n                Weapon.rotation = index / _Data._arr.length * 360;\r\n                Weapon.skin = `Game/UI/Game/Hero/Hero_01_weapon_${_Data._arr[index]['color']}.png`;\r\n                Weapon.addComponent(_Weapon);\r\n            }\r\n            EventAdmin._notify(_Event._Game_WeaponSate, [_WeaponSateType.rotate]);\r\n        }\r\n        lwgOnStart() {\r\n            TimerAdmin._frameLoop(1, this, () => {\r\n                this.ImgVar('LandContent').rotation += 0.1;\r\n            });\r\n            for (let index = 0; index < this.ImgVar('EnemyParent').numChildren; index++) {\r\n                const element = this.ImgVar('EnemyParent').getChildAt(index);\r\n                let rotate = Tools.randomOneHalf() == 1 ? -0.5 : 0.5;\r\n                TimerAdmin._frameLoop(1, this, () => {\r\n                    let point = Tools.Point.getRoundPos(element.rotation += rotate, this.ImgVar('MobileFrame').width / 2, new Laya.Point(this.ImgVar('LandContent').width / 2, this.ImgVar('LandContent').height / 2));\r\n                    element.x = point.x;\r\n                    element.y = point.y;\r\n                });\r\n            }\r\n        }\r\n        lwgBtnClick() {\r\n            console.log(this.ImgVar('WeaponOperation'));\r\n            Click._on(Click._Type.noEffect, this.ImgVar('WeaponOperation'), this, (e) => {\r\n                console.log(222);\r\n                _Game._fireControl.rotateSwitch = false;\r\n                _Game._fireControl.moveDownY = e.stageY;\r\n            }, (e) => {\r\n                if (!_Game._fireControl.rotateSwitch && Math.abs(_Game._fireControl.moveDownY - e.stageY) > 10) {\r\n                    if (_Game._fireControl.moveDownY - e.stageY > 10) {\r\n                        _Game._fireControl.moveRotateSpeed = -2;\r\n                    }\r\n                    else {\r\n                        _Game._fireControl.moveRotateSpeed = 2;\r\n                    }\r\n                    _Game._fireControl.moveDownY = e.stageY;\r\n                    EventAdmin._notify(_Event._Game_WeaponSate, [_WeaponSateType.mouseMove]);\r\n                }\r\n            }, (e) => {\r\n                _Game._fireControl.rotateSwitch = true;\r\n                _Game._fireControl.moveDownY = 0;\r\n                EventAdmin._notify(_Event._Game_WeaponSate, [_WeaponSateType.launch]);\r\n            }, (e) => {\r\n                _Game._fireControl.rotateSwitch = true;\r\n                _Game._fireControl.moveDownY = 0;\r\n            });\r\n        }\r\n    }\r\n    _Game.Game = Game;\r\n})(_Game || (_Game = {}));\r\nexport default _Game.Game;\r\n",
  "references": [
    "F:/Work/Game/07_SelfRescue_2.5.0/Project/SelfRescue_2.5.0/src/script/Frame/Lwg.ts",
    "F:/Work/Game/07_SelfRescue_2.5.0/Project/SelfRescue_2.5.0/src/script/Frame/_PreLoad.ts",
    "F:/Work/Game/07_SelfRescue_2.5.0/Project/SelfRescue_2.5.0/src/script/Frame/_PropTry.ts"
  ]
}
